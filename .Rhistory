d$migration_topic_top5[d$E5021_2== 58] = 1
d$migration_topic_top5[d$E5021_2== 252] = 1
d$migration_topic_top5[d$E5021_2== 6] = 1
d$migration_topic_top5[d$E5021_2== 16] = 1
d$migration_topic_top5[d$E5021_2== 141] = 1
d$migration_topic_top5[d$E5021_2== 231] = 1
d$migration_topic_top5[d$E5021_2== 90] = 1
d$migration_topic_top5[d$E5021_2== 151] = 1
d$migration_topic_top5[d$E5021_2== 68] = 1
d$migration_topic_top5[d$E5021_2== 46] = 1
d$migration_topic_top5[d$E5021_3== 23] = 1
d$migration_topic_top5[d$E5021_3== 120] = 1
d$migration_topic_top5[d$E5021_3== 124] = 1
d$migration_topic_top5[d$E5021_3== 116] = 1
d$migration_topic_top5[d$E5021_3== 239] = 1
d$migration_topic_top5[d$E5021_3== 163] = 1
d$migration_topic_top5[d$E5021_3== 88] = 1
d$migration_topic_top5[d$E5021_3== 30] = 1
d$migration_topic_top5[d$E5021_3== 58] = 1
d$migration_topic_top5[d$E5021_3== 252] = 1
d$migration_topic_top5[d$E5021_3== 6] = 1
d$migration_topic_top5[d$E5021_3== 16] = 1
d$migration_topic_top5[d$E5021_3== 141] = 1
d$migration_topic_top5[d$E5021_3== 231] = 1
d$migration_topic_top5[d$E5021_3== 90] = 1
d$migration_topic_top5[d$E5021_3== 151] = 1
d$migration_topic_top5[d$E5021_3== 68] = 1
d$migration_topic_top5[d$E5021_3== 46] = 1
d$migration_topic_top5[d$E5021_4== 23] = 1
d$migration_topic_top5[d$E5021_4== 120] = 1
d$migration_topic_top5[d$E5021_4== 124] = 1
d$migration_topic_top5[d$E5021_4== 116] = 1
d$migration_topic_top5[d$E5021_4== 239] = 1
d$migration_topic_top5[d$E5021_4== 163] = 1
d$migration_topic_top5[d$E5021_4== 88] = 1
d$migration_topic_top5[d$E5021_4== 30] = 1
d$migration_topic_top5[d$E5021_4== 58] = 1
d$migration_topic_top5[d$E5021_4== 252] = 1
d$migration_topic_top5[d$E5021_4== 6] = 1
d$migration_topic_top5[d$E5021_4== 16] = 1
d$migration_topic_top5[d$E5021_4== 141] = 1
d$migration_topic_top5[d$E5021_4== 231] = 1
d$migration_topic_top5[d$E5021_4== 90] = 1
d$migration_topic_top5[d$E5021_4== 151] = 1
d$migration_topic_top5[d$E5021_4== 68] = 1
d$migration_topic_top5[d$E5021_4== 46] = 1
d$migration_topic_top5[d$E5021_5== 23] = 1
d$migration_topic_top5[d$E5021_5== 120] = 1
d$migration_topic_top5[d$E5021_5== 124] = 1
d$migration_topic_top5[d$E5021_5== 116] = 1
d$migration_topic_top5[d$E5021_5== 239] = 1
d$migration_topic_top5[d$E5021_5== 163] = 1
d$migration_topic_top5[d$E5021_5== 88] = 1
d$migration_topic_top5[d$E5021_5== 30] = 1
d$migration_topic_top5[d$E5021_5== 58] = 1
d$migration_topic_top5[d$E5021_5== 252] = 1
d$migration_topic_top5[d$E5021_5== 6] = 1
d$migration_topic_top5[d$E5021_5== 16] = 1
d$migration_topic_top5[d$E5021_5== 141] = 1
d$migration_topic_top5[d$E5021_5== 231] = 1
d$migration_topic_top5[d$E5021_5== 90] = 1
d$migration_topic_top5[d$E5021_5== 151] = 1
d$migration_topic_top5[d$E5021_5== 68] = 1
d$migration_topic_top5[d$E5021_5== 46] = 1
table(d$migration_topic_top5, exclude = NULL)
# Quantiles
# migration before
table(d$migrant_stock_before, exclude = NULL)
d$migrant_stock_before_2 = quantiles(d$migrant_stock_before,2)
table(d$migrant_stock_before_2, exclude = NULL)
# migration shock 3 years
table(d$shock_3yrs, exclude = NULL)
d$shock_3yrs_2 = quantiles(d$shock_3yrs,2)
table(d$shock_3yrs_2, exclude = NULL)
# migration shock 5 years
table(d$shock_5yrs, exclude = NULL)
d$shock_5yrs_2 = quantiles(d$shock_5yrs,2)
table(d$shock_5yrs_2, exclude = NULL)
# migration shock 10 years
table(d$shock_10yrs, exclude = NULL)
d$shock_10yrs_2 = quantiles(d$shock_10yrs,2)
table(d$shock_10yrs_2, exclude = NULL)
# migration
table(d$change_migrant_stock_1520)
d$change_migrant_stock_1520_2 = quantiles(d$change_migrant_stock_1520,2)
table(d$change_migrant_stock_1520_2, exclude = NULL)
# salience
table(d$EB_salience)
d$EB_salience_2 = quantiles(d$EB_salience,2)
table(d$EB_salience_2, exclude = NULL)
# migration topic 5
table(d$migration_topic_top5, exclude = NULL)
# migration topic 3
table(d$migration_topic_top3, exclude = NULL)
# migration topic 1
table(d$migration_topic_top1, exclude = NULL)
# year
table(d$E1008)
# countries
table(d$E1006_NAM, exclude = NULL)
d$country = d$E1006_NAM
table(d$country, exclude = NULL)
length(unique(d$country))
# type of election
table(d$E1015, exclude = NULL)
# date election
table(d$E1018_1, exclude = NULL)
# date election second round
table(d$E1021_1, exclude = NULL)
# generate new date election
d$date_election = d$E1018_1
d$date_election[d$E1021_1!="9996. NOT APPLICABLE: NO SECOND ROUND"] == d$E1021_1[d$E1021_1!="9996. NOT APPLICABLE: NO SECOND ROUND"]
table(d$date_election, exclude = NULL)
d$date_election = noquote(d$date_election)
# survey month
table(d$E1032, exclude = NULL)
d$survey_month = NA
d$survey_month[d$E1032=="01. JANUARY"] = 1
d$survey_month[d$E1032=="02. FEBRUARY"] = 2
d$survey_month[d$E1032=="03. MARCH"] = 3
d$survey_month[d$E1032=="04. APRIL"] = 4
d$survey_month[d$E1032=="05. MAY"] = 5
d$survey_month[d$E1032=="06. JUNE"] = 6
d$survey_month[d$E1032=="07. JULY"] = 7
d$survey_month[d$E1032=="08. AUGUST"] = 8
d$survey_month[d$E1032=="09. SEPTEMBER"] = 9
d$survey_month[d$E1032=="10. OCTOBER"] = 10
d$survey_month[d$E1032=="11. NOVEMBER"] = 11
d$survey_month[d$E1032=="12. DECEMBER"] = 12
table(d$survey_month)
# survey day
table(d$E1033, exclude = NULL)
# survey year
table(d$E1034, exclude = NULL)
d$year = d$E1034
table(d$year)
# date survey
d$date_survey = noquote(paste(d$E1034, d$survey_month, d$E1033, sep = "-"))
# date from election
d$score = as.Date(as.character(d$date_survey), format="%Y-%m-%d") - as.Date(as.character(d$date_election), format="%Y-%m-%d")
d$score = as.numeric(d$score)
table(d$score, exclude = NULL) # ver missigness
# check score
x = data.frame(d$date_election,d$date_survey,d$score)
#View(x)
# outcome: immigrants are generally (NOT) good for economy
table(d$E3005_3, exclude = NULL)
d$immigrants_notgood_economy = NA
d$immigrants_notgood_economy[d$E3005_3=="1. STRONGLY AGREE"] = 1
d$immigrants_notgood_economy[d$E3005_3=="2. SOMEWHAT AGREE"] = 2
d$immigrants_notgood_economy[d$E3005_3=="3. NEITHER AGREE NOR DISAGREE"] = 3
d$immigrants_notgood_economy[d$E3005_3=="4. SOMEWHAT DISAGREE"] = 4
d$immigrants_notgood_economy[d$E3005_3=="5. STRONGLY DISAGREE"] = 5
table(d$immigrants_notgood_economy, exclude = NULL)
# outcome: culture is generally harmed by immigrants
table(d$E3005_4, exclude = NULL)
d$immigrantes_harm_culture = NA
d$immigrantes_harm_culture[d$E3005_4=="1. STRONGLY AGREE"] = 5
d$immigrantes_harm_culture[d$E3005_4=="2. SOMEWHAT AGREE"] = 4
d$immigrantes_harm_culture[d$E3005_4=="3. NEITHER AGREE NOR DISAGREE"] = 3
d$immigrantes_harm_culture[d$E3005_4=="4. SOMEWHAT DISAGREE"] = 2
d$immigrantes_harm_culture[d$E3005_4=="5. STRONGLY DISAGREE"] = 1
table(d$immigrantes_harm_culture, exclude = NULL)
# outcome: immigrants increase crime rates
table(d$E3005_5, exclude = NULL)
d$immigrantes_increase_crime = NA
d$immigrantes_increase_crime[d$E3005_5=="1. STRONGLY AGREE"] = 5
d$immigrantes_increase_crime[d$E3005_5=="2. SOMEWHAT AGREE"] = 4
d$immigrantes_increase_crime[d$E3005_5=="3. NEITHER AGREE NOR DISAGREE"] = 3
d$immigrantes_increase_crime[d$E3005_5=="4. SOMEWHAT DISAGREE"] = 2
d$immigrantes_increase_crime[d$E3005_5=="5. STRONGLY DISAGREE"] = 1
table(d$immigrantes_increase_crime, exclude = NULL)
# gender
table(d$E2002, exclude = NULL)
d$female = 0
d$female[d$E2002=="2. FEMALE"] = 1
table(d$female, exclude = NULL)
# education
table(d$E2003, exclude = NULL)
d$education = NA
d$education[d$E2003=="01. ISCED LEVEL 0 - EARLY CHILDHOOD EDUCATION"] = 1
d$education[d$E2003=="02. ISCED LEVEL 1 - PRIMARY"] = 2
d$education[d$E2003=="03. ISCED LEVEL 2 - LOWER SECONDARY"] = 3
d$education[d$E2003=="04. ISCED LEVEL 3 - UPPER SECONDARY"] = 4
d$education[d$E2003=="05. ISCED LEVEL 4 - POST-SECONDARY NON-TERTIARY"] = 5
d$education[d$E2003=="06. ISCED LEVEL 5 - SHORT-CYCLE TERTIARY"] = 6
d$education[d$E2003=="07. ISCED LEVEL 6 - BACHELOR OR EQUIVALENT"] = 7
d$education[d$E2003=="08. ISCED LEVEL 7 - MASTER OR EQUIVALENT"] = 8
d$education[d$E2003=="09. ISCED LEVEL 8 - DOCTORAL OR EQUIVALENT"] = 9
table(d$education, exclude = NULL)
# age
table(d$E2001_A, exclude = NULL)
d$age = d$E2001_A
d$age[d$E2001_A==9997] = NA
d$age[d$E2001_A==9998] = NA
d$age[d$E2001_A==9999] = NA
table(d$age, exclude = NULL)
# ideology
table(d$E3020, exclude = NULL)
d$ideology = d$E3020
d$ideology[d$E3020==95] = NA
d$ideology[d$E3020==97] = NA
d$ideology[d$E3020==98] = NA
d$ideology[d$E3020==99] = NA
table(d$ideology, exclude = NULL)
# drop year missing
table(d$year, exclude = NULL)
d = d[d$year!=9999,]
table(d$year, exclude = NULL)
# ideology
table(d$ideology, exclude = NULL)
d$ideology_cat = NA #"none"
d$ideology_cat[d$ideology<5] = "left"
d$ideology_cat[d$ideology==5] = "center"
d$ideology_cat[d$ideology>5] = "right"
d$ideology_cat = as.factor(d$ideology_cat)
table(d$ideology_cat, exclude = NULL)
table(d$ideology_cat, d$ideology)
d$ideology_cat2 = NA #"none"
d$ideology_cat2[d$ideology<4] = "left"
d$ideology_cat2[d$ideology>3 & d$ideology<7] = "center"
d$ideology_cat2[d$ideology>7] = "right"
d$ideology_cat2 = as.factor(d$ideology_cat2)
table(d$ideology_cat2, exclude = NULL)
table(d$ideology_cat2, d$ideology)
# score quadratic
d$score2 = d$score*d$score
# new outcome
d$anti_migration_attitudes = (d$immigrants_notgood_economy + d$immigrantes_harm_culture + d$immigrantes_increase_crime)/3
table(d$anti_migration_attitudes, exclude = NULL)
# subset 1
describe(d$score)
hist(d$score)
length(d$score[d$score<91])/length(d$score)
d = d[d$score<91,]
describe(d$score)
# save
save(d,file = "~/Dropbox/Elections and Xenophobia/01_data/clean_data/clean_cses5_2014apr25.RData")
##############################
# Analyze CSES data
##############################
rm(list=ls())
library(foreign)
library(Hmisc)
library(ri2)
library(stargazer)
library(readstata13)
library(lfe)
library(sjPlot)
library(estimatr)
library(fabricatr)
library(ggplot2)
library(dplyr)
library(ltm)
##############################
# Prepare data
##############################
# load data
load("~/Dropbox/Elections and Xenophobia/01_data/clean_data/clean_cses5_2014apr25.RData")
# Outcome
data <- data.frame(Q1=d$immigrantes_harm_culture,
Q2=d$immigrantes_increase_crime,
Q3=d$immigrants_notgood_economy)
cronbach.alpha(data, na.rm = T, CI=TRUE)
# Factors
d$country_f = as.factor(d$country)
d$country_n = as.numeric(d$country_f)
# Labels
table(d$ideology_cat)
d$Ideology = d$ideology_cat
d$Ideology  = recode(d$Ideology, left = "Left", right = "Right", center = "Center")
# Subsets
d_high_t3 = d[d$migration_topic_top3==1,]
d_low_t3 = d[d$migration_topic_top3==0,]
d_high_shock_3yrs = d[d$shock_3yrs_2==2,]
d_low_shock_3yrs = d[d$shock_3yrs_2==1,]
# Labels
#attr(d$ideology3, 'label') <- 'Ideology'
#attr(d_high_t3$ideology3, 'label') <- 'Ideology'
#attr(d_low_t3$ideology3, 'label') <- 'Ideology'
#attr(d_high_shock_3yrs$ideology3, 'label') <- 'Ideology'
#attr(d_low_shock_3yrs$ideology3, 'label') <- 'Ideology'
# Levels
#d$ideology3 = factor(d$ideology3levels(dideology3)[c(2,1,3,4)])
#d$ideology_cat
###########################
# Main results
###########################
m0 = lm_robust(anti_migration_attitudes  ~  score + education + female + age + as.factor(year) + as.factor(country_n), data = d)
summary(m0)
d$Ideology
table(d$Ideology )
table(d$Ideology, exclude = NULL)
m1 = lm_robust(anti_migration_attitudes  ~  score + Ideology + education + female + age + score*Ideology + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
d$Ideology[is.na(d$Ideology)] = "None"
table(d$Ideology, exclude = NULL)
d$Ideology[is.na(d$Ideology)]
d$Ideology[is.na(d$Ideology)] = "None"
d$Ideology[is.na(d$Ideology)]
table(d$Ideology, exclude = NULL)
d$Ideology[d$Ideology=="<NA>"]
d$Ideology[d$Ideology=="<NA>"] = "None"
d$Ideology <- ifelse(is.na(d$Ideology), "None", d$Ideology)
table(d$Ideology, exclude = NULL)
table(d$ideology_cat)
d$Ideology = d$ideology_cat
d$Ideology <- ifelse(is.na(d$Ideology), "None", d$Ideology)
table(d$ideology_cat)
table(d$ideology_cat)
d$Ideology = d$ideology_cat
table(d$Ideology, exclude = NULL)
d$Ideology <- ifelse(is.na(d$Ideology), "None", d$Ideology)
table(d$Ideology, exclude = NULL)
table(d$ideology_cat)
table(d$ideology_cat)
d$Ideology = d$ideology_cat
d$Ideology <- ifelse(is.na(d$Ideology), 4, d$Ideology)
d$Ideology
table(d$Ideology, exclude = NULL)
table(d$ideology_cat)
d$Ideology  = recode(d$Ideology, 1 = "Center", 2 = "Left", 3 = "Right", 4 = "None")
table(d$Ideology, exclude = NULL)
d$Ideology  = recode(d$Ideology, 1 = "Center", 2 = "Left", 3 = "Right", 4 = "None")
d$Ideology
d <- d %>%
mutate(NewIdeology = case_when(
Ideology == 1 ~ "center",
Ideology == 2 ~ "left",
Ideology == 3 ~ "right",
Ideology == 4 ~ "none"
))
table(d$NewIdeology)
d <- d %>%
mutate(Ideology_labels = case_when(
Ideology == 1 ~ "center",
Ideology == 2 ~ "left",
Ideology == 3 ~ "right",
Ideology == 4 ~ "none"
))
table(d$Ideology_labels)
table(d$ideology_cat)
d_high_t3 = d[d$migration_topic_top3==1,]
d_low_t3 = d[d$migration_topic_top3==0,]
d_high_shock_3yrs = d[d$shock_3yrs_2==2,]
d_low_shock_3yrs = d[d$shock_3yrs_2==1,]
m0 = lm_robust(anti_migration_attitudes  ~  score + education + female + age + as.factor(year) + as.factor(country_n), data = d)
summary(m0)
m1 = lm_robust(anti_migration_attitudes  ~  score + as.factor(Ideology_labels) + education + female + age + score*as.factor(Ideology_labels) + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
m1 = lm_robust(anti_migration_attitudes  ~  score + as.factor(Ideology_labels) + education + female + age + score*as.factor(Ideology_labels) + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
d$Ideology_labels <- factor(d$Ideology_labels, levels = c("none", "left","center","right"))
table(d$Ideology_labels)
table(d$ideology_cat)
table(d$Ideology_labels)
d_high_t3 = d[d$migration_topic_top3==1,]
d_low_t3 = d[d$migration_topic_top3==0,]
d_high_shock_3yrs = d[d$shock_3yrs_2==2,]
d_low_shock_3yrs = d[d$shock_3yrs_2==1,]
m1 = lm_robust(anti_migration_attitudes  ~  score + as.factor(Ideology_labels) + education + female + age + score*as.factor(Ideology_labels) + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
plot_model(m1, type = "pred", terms = c("score", "Ideology_labels"))
m1 = lm_robust(anti_migration_attitudes  ~  score + as.factor(Ideology_labels) + education + female + age + score*as.factor(Ideology_labels) + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
table(d$Ideology, exclude = NULL)
d$Ideology_labels
d = d[d$Ideology_labels!="none",]
table(d$Ideology_labels)
m1 = lm_robust(anti_migration_attitudes  ~  score + as.factor(Ideology_labels) + education + female + age + score*as.factor(Ideology_labels) + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
d$Ideology_labels
##############################
# Analyze CSES data
##############################
rm(list=ls())
library(foreign)
library(Hmisc)
library(ri2)
library(stargazer)
library(readstata13)
library(lfe)
library(sjPlot)
library(estimatr)
library(fabricatr)
library(ggplot2)
library(dplyr)
library(ltm)
##############################
# Prepare data
##############################
# load data
load("~/Dropbox/Elections and Xenophobia/01_data/clean_data/clean_cses5_2014apr25.RData")
# Outcome
data <- data.frame(Q1=d$immigrantes_harm_culture,
Q2=d$immigrantes_increase_crime,
Q3=d$immigrants_notgood_economy)
cronbach.alpha(data, na.rm = T, CI=TRUE)
# Factors
d$country_f = as.factor(d$country)
d$country_n = as.numeric(d$country_f)
# Labels
table(d$ideology_cat)
d$Ideology = d$ideology_cat
d$Ideology <- ifelse(is.na(d$Ideology), 4, d$Ideology)
table(d$Ideology, exclude = NULL)
d <- d %>%
mutate(Ideology_labels = case_when(
Ideology == 1 ~ "center",
Ideology == 2 ~ "left",
Ideology == 3 ~ "right",
Ideology == 4 ~ "none"
))
table(d$Ideology_labels)
d$Ideology_labels <- factor(d$Ideology_labels, levels = c("none", "center","left","right"))
table(d$Ideology_labels)
# Subsets
d_high_t3 = d[d$migration_topic_top3==1,]
d_low_t3 = d[d$migration_topic_top3==0,]
d_high_shock_3yrs = d[d$shock_3yrs_2==2,]
d_low_shock_3yrs = d[d$shock_3yrs_2==1,]
# Labels
#attr(d$ideology3, 'label') <- 'Ideology'
#attr(d_high_t3$ideology3, 'label') <- 'Ideology'
#attr(d_low_t3$ideology3, 'label') <- 'Ideology'
#attr(d_high_shock_3yrs$ideology3, 'label') <- 'Ideology'
#attr(d_low_shock_3yrs$ideology3, 'label') <- 'Ideology'
# Levels
#d$ideology3 = factor(d$ideology3levels(dideology3)[c(2,1,3,4)])
#d$ideology_cat
d = d[d$Ideology_labels!="none",]
table(d$Ideology_labels)
m0 = lm_robust(anti_migration_attitudes  ~  score + education + female + age + as.factor(year) + as.factor(country_n), data = d)
summary(m0)
m1 = lm_robust(anti_migration_attitudes  ~  score + as.factor(Ideology_labels) + education + female + age + score*as.factor(Ideology_labels) + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
plot_model(m1, type = "pred", terms = c("score", "Ideology_labels")) + theme(plot.title = element_text(hjust = 0.5)) + scale_color_manual(values = c("yellow3", "red", "blue")) + ylab("Predicted values of anti-migration attitudes") + xlab("Days from the election") + ggtitle("") + ylim(1,4) + theme_bw() + scale_x_continuous(breaks=seq(0, 90, 10), limits=c(0, 90)) + theme(text=element_text(size=20)) + theme(plot.title = element_text(hjust = 0.5))
##############################
# Analyze CSES data
##############################
rm(list=ls())
library(foreign)
library(Hmisc)
library(ri2)
library(stargazer)
library(readstata13)
library(lfe)
library(sjPlot)
library(estimatr)
library(fabricatr)
library(ggplot2)
library(dplyr)
library(ltm)
##############################
# Prepare data
##############################
# load data
load("~/Dropbox/Elections and Xenophobia/01_data/clean_data/clean_cses5_2014apr25.RData")
# Outcome
data <- data.frame(Q1=d$immigrantes_harm_culture,
Q2=d$immigrantes_increase_crime,
Q3=d$immigrants_notgood_economy)
cronbach.alpha(data, na.rm = T, CI=TRUE)
# Factors
d$country_f = as.factor(d$country)
d$country_n = as.numeric(d$country_f)
# Labels
table(d$ideology_cat)
d$Ideology = d$ideology_cat
d$Ideology  = recode(d$Ideology, left = "Left", right = "Right", center = "Center")
# Subsets
d_high_t3 = d[d$migration_topic_top3==1,]
d_low_t3 = d[d$migration_topic_top3==0,]
d_high_shock_3yrs = d[d$shock_3yrs_2==2,]
d_low_shock_3yrs = d[d$shock_3yrs_2==1,]
# Labels
#attr(d$ideology3, 'label') <- 'Ideology'
#attr(d_high_t3$ideology3, 'label') <- 'Ideology'
#attr(d_low_t3$ideology3, 'label') <- 'Ideology'
#attr(d_high_shock_3yrs$ideology3, 'label') <- 'Ideology'
#attr(d_low_shock_3yrs$ideology3, 'label') <- 'Ideology'
# Levels
#d$ideology3 = factor(d$ideology3levels(dideology3)[c(2,1,3,4)])
#d$ideology_cat
###########################
# Main results
###########################
m0 = lm_robust(anti_migration_attitudes  ~  score + education + female + age + as.factor(year) + as.factor(country_n), data = d)
summary(m0)
###########################
# Interaction
###########################
m1 = lm_robust(anti_migration_attitudes  ~  score + Ideology + education + female + age + score*Ideology + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
plot_model(m1, type = "pred", terms = c("score", "Ideology")) + theme(plot.title = element_text(hjust = 0.5)) + scale_color_manual(values = c("yellow3", "red", "blue")) + ylab("Predicted values of anti-migration attitudes") + xlab("Days from the election") + ggtitle("") + ylim(1,4) + theme_bw() + scale_x_continuous(breaks=seq(0, 90, 10), limits=c(0, 90)) + theme(text=element_text(size=20)) + theme(plot.title = element_text(hjust = 0.5))
summary(m1)
# Left
m1a = lm_robust(anti_migration_attitudes  ~  score + education + female + age + as.factor(year) + as.factor(country_n), data = d_left)
summary(m1a)
d_left = d[d$Ideology=="Left",]
d_right = d[d$Ideology=="Right",]
d_center = d[d$Ideology=="Center",]
# Left
m1a = lm_robust(anti_migration_attitudes  ~  score + education + female + age + as.factor(year) + as.factor(country_n), data = d_left)
summary(m1a)
summary(m1)
table(d$score)
describe(d$Ideology)
74223   - 22242
m1 = lm_robust(anti_migration_attitudes  ~  score + Ideology + education + female + age + score*Ideology + as.factor(year) + as.factor(country_n), data = d)
summary(m1)
View(m0)
